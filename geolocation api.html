<!DOCTYPE html>
<html lang="en">
<head>
<title> Geolocation API </title>
<meta charset="UTF-8">
<meta name="keywords" content="HTML">
<meta name="description" content="The HTML Geolocation API is used to locate a user's position.">
<meta name="author" content="unknown">
<meta http-equiv="refresh" content="300">
<meta name="viewport" content="width=device-width">
<style type="text/css">
h1{text-align: center; margin: 10vw;}
body{margin:10vw; background-color:azure;}
table, td{border:2px solid black; border-collapse:collapse; margin: auto;}
</style>
</head>
<body>
<header>
<h1> Geolocation API </h1>
</header>
<main>
<p> The HTML Geolocation API is used to get the geographical position of a user. </p>
<div id="locate_position">
<h2> Locate the User's Position </h2>
<p> Since this can compromise privacy, the position is not available unless the user approves it. </p>
<p> <u>Note</u>: Geolocation is most accurate for devices with GPS, like smartphones. </p>
<p> <strong><u>Note</u>:</strong> <em>As of Chrome 50, the Geolocation API will only work on secure contexts such as HTTPS. If your site is hosted on an non-secure origin (such as HTTP) the requests to get the users location will no longer function.</em> </p>
</div>
<div id="using">
<h2> Using HTML Geolocation </h2>
<p> The <span style="color: aqua;">getCurrentPosition() method</span> is used to return the user's position. </p>
<p> The example below returns the latitude and longitude of the user's position: </p>
<table>
<thead></thead>
<tbody><tr><td><pre><code>
&#60;script&#62;
var x = document.getElementById("demo");
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition(showPosition);
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}

function showPosition(position) {
  x.innerHTML = "Latitude: " + position.coords.latitude +
  "&#60;br&#62;Longitude: " + position.coords.longitude;
}
&#60;/script&#62;
</code></pre></td></tr></tbody>
<tfoot></tfoot>
</table>
<div id="exexplained">
<h3> Example explained: </h3>
<ul type="disc">
<li> Check if Geolocation is supported. </li>
<li> If supported, run the getCurrentPosition() method. If not, display a message to the user. </li>
<li> If the getCurrentPosition() method is successful, it returns a coordinates object to the function specified in the parameter (showPosition). </li>
<li> The showPosition() function outputs the Latitude and Longitude. </li>
</ul>
<p> The example above is a very basic Geolocation script, with no error handling. </p>
</div>
</div>
<div id="errrors_rejections">
<h2> Handling Errors and Rejections </h2>
<p> The second parameter of the <span style="color:aqua;">getCurrentPosition() method</span> is used to handle errors. It specifies a function to run if it fails to get the user's location: </p>
<table>
<thead></thead>
<tbody><tr><td><pre><code>
function showError(error) {
  switch(error.code) {
    case error.PERMISSION_DENIED:
      x.innerHTML = "User denied the request for Geolocation."
      break;
    case error.POSITION_UNAVAILABLE:
      x.innerHTML = "Location information is unavailable."
      break;
    case error.TIMEOUT:
      x.innerHTML = "The request to get user location timed out."
      break;
    case error.UNKNOWN_ERROR:
      x.innerHTML = "An unknown error occurred."
      break;
  }
}
</code></pre></td></tr></tbody>
<tfoot></tfoot>
</table>
</div>
<div id="specific_info">
<h2> Location-specific Information </h2>
<p> This page has demonstrated how to show a user's position on a map. Geolocation is also very useful for location-specific information, like: </p>
<ul type="disc">
<li> Up-to-date local information. </li>
<li> Showing Points-of-interest near the user. </li>
<li> Turn-by-turn navigation (GPS). </li>
</ul>
</div>
<div id="return_data">
<h2> The <span style="color:aqua;">getCurrentPosition() Method</span> - Return Data </h2>
<p> <span style="color:aqua;">getCurrentPosition() method</span> returns an object on success. The latitude, longitude and accuracy properties are always returned. The other properties are returned if available: </p>
<table>
<thead><tr><th> Property </th>	<th> Returns </th></tr></thead>
<tbody>
<tr><td> coords.latitude </td> <td> The latitude as a decimal number (always returned). </td></tr>
<tr><td> coords.longitude </td>	<td> The longitude as a decimal number (always returned). </td></tr>
<tr><td> coords.accuracy </td> <td> The accuracy of position (always returned). </td></tr>
<tr><td> coords.altitude </td> <td> The altitude in meters above the mean sea level (returned if available). </td></tr>
<tr><td> coords.altitudeAccuracy </td> <td> The altitude accuracy of position (returned if available). </td></tr>
<tr><td> coords.heading </td> <td> The heading as degrees clockwise from North (returned if available). </td></tr>
<tr><td> coords.speed </td> <td> The speed in meters per second (returned if available). </td></tr>
<tr><td> timestamp </td> <td> The date/time of the response (returned if available). </td></tr>
</tbody>
<tfoot></tfoot>
</table>
</div>
<div id="other_methods">
<h2> Geolocation Object - Other interesting Methods </h2>
<p> The Geolocation object also has other interesting methods: </p>
<ul type="circle">
<li> <span style="color:aqua;">watchPosition()</span> - Returns the current position of the user and continues to return updated position as the user moves (like the GPS in a car). </li>
<li> <span style="color:aqua;">clearWatch()</span> - Stops the <span style="color:aqua;">watchPosition() method</span>. </li>
</ul>
<p> The example below shows the <span style="color:aqua;">watchPosition() method</span>. You need an accurate GPS device to test this (like smartphone): </p>
<table>
<thead></thead>
<tbody><tr><td><pre><code>
&#60;script&#62;
var x = document.getElementById("demo");
function getLocation() {
  if (navigator.geolocation) {
    navigator.geolocation.watchPosition(showPosition);
  } else {
    x.innerHTML = "Geolocation is not supported by this browser.";
  }
}
function showPosition(position) {
  x.innerHTML = "Latitude: " + position.coords.latitude +
  "&#60;br&#62;Longitude: " + position.coords.longitude;
}
&#60;/script&#62;
</code></pre></td></tr></tbody>
<tfoot></tfoot>
</table>
</div>
</main>
</body>
</html>